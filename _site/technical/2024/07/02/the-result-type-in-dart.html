<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>The Result Type In Dart | mcmah309 Blog</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="The Result Type In Dart" />
<meta name="author" content="Dillon McMahon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Result Type In Dart" />
<meta property="og:description" content="The Result Type In Dart" />
<link rel="canonical" href="http://localhost:4000/technical/2024/07/02/the-result-type-in-dart.html" />
<meta property="og:url" content="http://localhost:4000/technical/2024/07/02/the-result-type-in-dart.html" />
<meta property="og:site_name" content="mcmah309 Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-07-02T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="The Result Type In Dart" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Dillon McMahon"},"dateModified":"2024-07-02T00:00:00+00:00","datePublished":"2024-07-02T00:00:00+00:00","description":"The Result Type In Dart","headline":"The Result Type In Dart","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/technical/2024/07/02/the-result-type-in-dart.html"},"url":"http://localhost:4000/technical/2024/07/02/the-result-type-in-dart.html"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/default.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i|Lora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="mcmah309 Blog" href="/feed.xml">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
</head>


  <body class="layout--post  the-result-type-in-dart">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/">Home</a></li><li><a href="/about/">About</a></li><li><a href="/posts/">Posts</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="/search/">Search</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">mcmah309 Blog</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Tech talk and ongoing open source projects</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">The Result Type In Dart
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><div class="author-info"><div class="author-name">
        <span class="p-name">Dillon McMahon</span>
      </div>

<span class="read-time">3 min read</span>

    <time class="page-date dt-published" datetime="2024-07-02T00:00:00+00:00"><a class="u-url" href="">July 2, 2024</a>
</time>

  </div>
</div>

        
  <h3 class="page-taxonomies-title">Categories</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy"><a class="p-category" href="/categories/#technical" title="Pages filed under technical">technical</a></li>
  </ul>


        
  <h3 class="page-taxonomies-title">Tags</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy"><a href="/tags/#dart" title="Pages tagged dart" rel="tag">dart</a></li>
  </ul>


      </div>

      <div class="page-content">
        <div class="e-content">
          <h1 id="the-result-type-in-dart">The Result Type In Dart</h1>

<p>Every modern programming language has error handling. Like Python, Dart chose the unchecked try-catch catch pattern, Java went with checked try-catch pattern, Zig went with Error Unions, and Rust went the <code class="language-plaintext highlighter-rouge">Result</code> type.</p>

<h2 id="what-is-a-result-monad-type-and-why-use-it">What Is a Result Monad Type And Why Use it?</h2>

<p><code class="language-plaintext highlighter-rouge">Result</code> is often referred to as a “monad”. A monad is just a wrapper around an object that provides a standard way of interacting with the inner object. The
<code class="language-plaintext highlighter-rouge">Result</code> monad is used in place of throwing exceptions. Instead, the function
returns a <code class="language-plaintext highlighter-rouge">Result</code>, which can either be a <code class="language-plaintext highlighter-rouge">Ok</code> (Success) or <code class="language-plaintext highlighter-rouge">Err</code> (Error/Failure), <code class="language-plaintext highlighter-rouge">Result</code> is the sum type of the two.</p>

<p>Using <code class="language-plaintext highlighter-rouge">Result</code> provides a predictable control flow to a program. Error handling is explicit as the caller of a function
that returns an error must handle the possibility of an error at that point. At which the point, the calling function can resolve
any possible issue or clean its state, where necessary, or pass the error up the chain until a function resolves
the issue.</p>

<h2 id="the-problem-with-dart-error-handling">The Problem With Dart Error Handling</h2>

<p>The best way to illustrate the problem with Dart’s error handling is an example. Consider the following program,
which doesn’t do anything useful, but we are more interested in the control flow:</p>
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// try {</span>
    <span class="n">print</span><span class="p">(</span><span class="n">order</span><span class="p">(</span><span class="s">"Bob"</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
  <span class="c1">// } catch(e) {</span>
    <span class="c1">// print(e);</span>
  <span class="c1">// }</span>
<span class="p">}</span>

<span class="kt">String</span> <span class="nf">order</span><span class="p">(</span><span class="kt">String</span> <span class="n">user</span><span class="p">,</span> <span class="kt">int</span> <span class="n">orderNumber</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">result</span> <span class="o">=</span> <span class="n">makeFood</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
  <span class="k">return</span> <span class="s">"Order of </span><span class="si">$result</span><span class="s"> is complete for </span><span class="si">$user</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">String</span> <span class="nf">makeFood</span><span class="p">(</span><span class="kt">int</span> <span class="n">orderNumber</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">switch</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">)</span> <span class="p">{</span>
    <span class="mi">1</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">makeHamburger</span><span class="p">(),</span>
    <span class="mi">2</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">makePasta</span><span class="p">(),</span>
    <span class="c1">// Who catches this??</span>
    <span class="c1">// How do we know we won't forget to catch this??</span>
    <span class="n">_</span> <span class="o">=</span><span class="p">&gt;</span> <span class="k">throw</span> <span class="n">Exception</span><span class="p">(</span><span class="s">"Unknown order number '</span><span class="si">$orderNumber</span><span class="s">'."</span><span class="p">),</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kt">String</span> <span class="nf">makeHamburger</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">"Hamburger"</span><span class="p">;</span>
<span class="kt">String</span> <span class="nf">makePasta</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">"Pasta"</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>There are several issues with this program:</p>
<ul>
  <li>If we forget to catch in the correct spot, we just introduced a bug or worse - crashed our entire program.</li>
  <li>We may later reuse <code class="language-plaintext highlighter-rouge">makeFood</code> or <code class="language-plaintext highlighter-rouge">order</code>, and forget that it can throw.</li>
  <li>The more we reuse functions that can throw, the less maintainable and error-prone our program becomes.</li>
  <li>Throwing is also an expensive operation, as it requires stack unwinding.</li>
</ul>

<h3 id="result-type">Result Type</h3>
<p>Throughout the rest of this article we will be looking at the <code class="language-plaintext highlighter-rouge">Result</code> type in Dart as provided by the <a href="https://pub.dev/packages/rust_core">rust_core</a>
package.</p>

<p>Here is the previous example implemented with <code class="language-plaintext highlighter-rouge">Result</code>:</p>
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:rust_core/result.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="n">order</span><span class="p">(</span><span class="s">"Bob"</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">Result</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="n">Exception</span><span class="p">&gt;</span> <span class="n">order</span><span class="p">(</span><span class="kt">String</span> <span class="n">user</span><span class="p">,</span> <span class="kt">int</span> <span class="n">orderNumber</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">result</span> <span class="o">=</span> <span class="n">makeFood</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="n">result</span> <span class="k">case</span> <span class="n">Ok</span><span class="p">(</span><span class="o">:</span><span class="kd">final</span> <span class="n">ok</span><span class="p">))</span> <span class="p">{</span> <span class="c1">// Could also use "if(result.isOk())" or a switch statement</span>
    <span class="k">return</span> <span class="n">Ok</span><span class="p">(</span><span class="s">"Order of </span><span class="si">$ok</span><span class="s"> is complete for </span><span class="si">$user</span><span class="s">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Result</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="n">Exception</span><span class="p">&gt;</span> <span class="n">makeFood</span><span class="p">(</span><span class="kt">int</span> <span class="n">orderNumber</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">switch</span><span class="p">(</span><span class="n">orderNumber</span><span class="p">)</span> <span class="p">{</span>
    <span class="mi">1</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Ok</span><span class="p">(</span><span class="n">makeHamburger</span><span class="p">()),</span>
    <span class="mi">2</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Ok</span><span class="p">(</span><span class="n">makePasta</span><span class="p">()),</span>
    <span class="n">_</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">Err</span><span class="p">(</span><span class="n">Exception</span><span class="p">(</span><span class="s">"Unknown order number '</span><span class="si">$orderNumber</span><span class="s">'."</span><span class="p">)),</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kt">String</span> <span class="nf">makeHamburger</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">"Hamburger"</span><span class="p">;</span>
<span class="kt">String</span> <span class="nf">makePasta</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="s">"Pasta"</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>By using <code class="language-plaintext highlighter-rouge">Result</code>, we have removed all undefined behaviors due to control flow! Thus eliminating
all previously mentioned issues.</p>

<p>You can interact with <code class="language-plaintext highlighter-rouge">Result</code> through conventions like
<code class="language-plaintext highlighter-rouge">case Ok(:final ok)</code> and <code class="language-plaintext highlighter-rouge">isOk()</code>, or methods like <code class="language-plaintext highlighter-rouge">.map(..)</code>, .<code class="language-plaintext highlighter-rouge">andThen(..)</code>, etc. Checking allows you to
either resolve any potential issues in the calling function or pass the error up the chain until a function resolves
the issue. This provides predictable control flow to your program, eliminating many potential bugs and countless
hours of debugging.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In conclusion, adopting the <code class="language-plaintext highlighter-rouge">Result</code> type for error handling in Dart brings numerous benefits, especially in creating
predictable and maintainable control flows. Unlike traditional try-catch mechanisms, <code class="language-plaintext highlighter-rouge">Result</code> ensures that error
handling is explicit and unavoidable. Thus preventing potential bugs and improving code reliability.
The <a href="https://pub.dev/packages/rust_core">rust_core</a> package’s implementation
of <code class="language-plaintext highlighter-rouge">Result</code> in Dart provides a powerful tool for managing errors effectively, 
aligning Dart’s error handling capabilities with those of more modern and robust systems like Rust.
Embracing this approach will not only enhance the stability of Dart applications but also streamline the 
development process, making it easier to maintain and debug code in the long run.</p>

        </div>

        
          <div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Ftechnical%2F2024%2F07%2F02%2Fthe-result-type-in-dart.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=The+%60Result%60+Type+In+Dart%20http%3A%2F%2Flocalhost%3A4000%2Ftechnical%2F2024%2F07%2F02%2Fthe-result-type-in-dart.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Ftechnical%2F2024%2F07%2F02%2Fthe-result-type-in-dart.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=The+%60Result%60+Type+In+Dart&url=http%3A%2F%2Flocalhost%3A4000%2Ftechnical%2F2024%2F07%2F02%2Fthe-result-type-in-dart.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>

        

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/technical/2024/06/28/package-highlight-dart-mappable.html">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Package Highlight - dart_mappable

      </span>
    </a>
  

  
    <a class="page-next" href="/technical/2025/06/03/ArrayVec-or-SmallVec-or-TinyVec.html">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Should You Really Ever Use ArrayVec or SmallVec or TinyVec As Your Go To Vec?
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <div class="social-icons"><a class="social-icon" href="https://github.com/mcmah309"><i class="fab fa-github-square fa-2x" title="GitHub"></i></a></div><div class="copyright">
    
      <p>&copy; 2025 mcmah309 Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


  </body>

</html>
